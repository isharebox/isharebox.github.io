---
import Layout from "../layouts/Layout.astro";
import Pagination from "../components/Pagination.astro";
import type { ShortPageData } from "../shared/type";
import config from "urodele.config";

interface Props {
  posts: ShortPageData[];
  page: number;
  pages: number;
}

const { posts, page, pages } = Astro.props;
const tags = ['ai', 'Urodele', 'vibecoding', 'essay', 'tech', 'knowledge', 'travel', 'poem', 'workflow'];

function formatDate(dateStr: string) {
  return new Date(dateStr).toISOString().split('T')[0];
}
---

<Layout title={config.head.title}>
  <!-- ★ 使用 UnoCSS 类 -->
  <header class="text-center py-8 border-b border-border">
    <h1 class="text-2xl font-semibold text-text mb-2 tracking-tight">Less is more</h1>
    <p class="text-comment text-sm italic max-w-md mx-auto">因一念有无故空灭而仿佛无处可逃。由此心无放逸不失众善。</p>
  </header>
  
  <main>
    <div class="content">
      <h2 class="text-lg font-semibold text-text mt-6 mb-4 pb-2 border-b border-border">Most recent posts</h2>
      
      <ul class="list-none p-0 m-0">
        {
          posts.map((item) => (
            <li class="flex items-baseline gap-6 py-1 hover:bg-selection transition-colors">
              <time class="font-mono text-xs text-comment whitespace-nowrap w-20">{formatDate(item.createTime)}</time>
              <a href={`/post/${item.id}`} class="text-function text-sm hover:text-text hover:underline transition-colors">
                {item.title}
              </a>
            </li>
          ))
        }
      </ul>
      
      <a href="/stream" class="block mt-6 text-comment text-sm italic hover:text-function transition-colors">
        查看更多碎片思考，请前往 Stream →
      </a>
      
      <Pagination page={page} pages={pages} />
      
      <section class="mt-8 pt-6 border-t border-border text-center">
        <div class="flex flex-wrap justify-center gap-3">
          {tags.map(tag => (
            <a href={`/tag/${encodeURIComponent(tag)}`} class="text-comment text-sm hover:text-function transition-colors">
              #{tag}
            </a>
          ))}
        </div>
      </section>
    </div>
  </main>
</Layout>
