{"content":"{\"__ud_title\":\"llm in browser åœ¨æµè§ˆå™¨é‡Œè·‘ Qwen2.5\",\"__ud_tags\":[\"ai\"],\"__ud_update_time\":1770712929392,\"__ud_create_time\":1770706790252,\"__ud_draft\":false,\"type\":\"doc\",\"content\":[{\"type\":\"heading\",\"attrs\":{\"level\":1,\"id\":\"llm-in-browser-åœ¨æµè§ˆå™¨é‡Œè·‘-Qwen25\"},\"content\":[{\"type\":\"text\",\"text\":\"llm in browser åœ¨æµè§ˆå™¨é‡Œè·‘ Qwen2.5\"}]},{\"type\":\"heading\",\"attrs\":{\"level\":3,\"id\":\"è®©-Chrome-è·‘èµ·æ¥\"},\"content\":[{\"type\":\"text\",\"text\":\"è®© Chrome è·‘èµ·æ¥\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"æœ‰äº† WebGPUï¼ŒJavaScript å¯ä»¥ç›´æ¥è°ƒç”¨åº•å±‚çš„æ˜¾å¡ç®—åŠ›ã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"å†åŠ ä¸Š \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://link.juejin.cn?target=https%3A%2F%2Fwebllm.mlc.ai%2F\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}},{\"type\":\"bold\"}],\"text\":\"WebLLM ğŸ¤–\"},{\"type\":\"text\",\"text\":\" è¿™ç§å¤§æ€å™¨ï¼Œå®Œå…¨å¯ä»¥æŠŠ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Llama-3-8B-Instruct\"},{\"type\":\"text\",\"text\":\" è¿™ç§çº§åˆ«çš„æ¨¡å‹ï¼Œç»è¿‡ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"4bit é‡åŒ–\"},{\"type\":\"text\",\"text\":\" åï¼Œå‹ç¼©åˆ° 3-4GBï¼Œç›´æ¥å¡è¿›æµè§ˆå™¨é‡Œ\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"æ²¡ç”¨åç«¯çš„ä¸€è¡Œä»£ç ã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ç›´æ¥ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"npm install @mlc-ai/web-llm\"},{\"type\":\"text\",\"text\":\"ã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"æ ¸å¿ƒé€»è¾‘å°±è¿™ä¹ˆå‡ è¡Œï¼ˆä¼ªä»£ç ï¼‰ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»è¯•ä¸€ä¸‹ï¼š\"}]},{\"type\":\"codeBlock\",\"attrs\":{\"language\":\"JavaScript\"},\"content\":[{\"type\":\"text\",\"text\":\"import { CreateMLCEngine } from \\\"@mlc-ai/web-llm\\\";\\n\\n// é€‰æœ€å°ä¸”ç¨³å®šçš„Qwen2.5,å…ˆä¿è¯èƒ½è·‘èµ·æ¥\\nconst modelId = \\\"Qwen2.5-0.5B-Instruct-q4f32_1-MLC\\\";\\n\\n// åˆå§‹åŒ–å¼•æ“ï¼ˆWebGPUï¼‰\\nconst engine = await CreateMLCEngine(modelId, {\\n  initProgressCallback: (p) => {\\n    console.log(\\\"[MLC]\\\", p.text);\\n  },\\n});\\n\\n// æ§åˆ¶å°å¯¹è¯\\nasync function ask(text: string) {\\n  const res = await engine.chat.completions.create({\\n    messages: [{ role: \\\"user\\\", content: text }],\\n  });\\n  console.log(\\\"ğŸ¤–\\\", res.choices[0].message.content);\\n}\\n\\n// æµ‹è¯•\\nawait ask(\\\"å†™ä¸€ä¸ª React Button\\\")\\nawait ask(\\\"ç”¨CSSå®ç°ä¸‰è§’å½¢\\\")\\nawait ask(\\\"ç”¨Pythonå†™ä¸€ä¸ªå†’æ³¡æ’åº\\\")\\n\\n\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"è¿è¡Œçš„é‚£ä¸€åˆ»ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨åŠ è½½ï¼ˆè®¾å¤‡é…ç½®ä½çš„åŒå­¦å°½é‡ç”¨å°æ¨¡å‹ğŸ™‚â€â†”ï¸ï¼‰ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmlc-ai%2Fweb-llm%2Fblob%2Fmain%2Fsrc%2Fconfig.ts%23L313\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"ğŸ‘‰ å¯ç”¨æ¨¡å‹\"}]},{\"type\":\"paragraph\"},{\"type\":\"image\",\"attrs\":{\"src\":\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea96ea970286482ebf6359b5e77ede8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&x-expires=1771301869&x-signature=9XHkhpQeC1HBWE%2FPbx%2BOpm8Ja9M%3D\",\"alt\":\"image.png\",\"title\":null}},{\"type\":\"blockquote\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ASK: å†™ä¸€ä¸ª React Button\"}]}]},{\"type\":\"paragraph\"},{\"type\":\"image\",\"attrs\":{\"src\":\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58aa00282dfb4558a8ebaf3b0fe9ba82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&x-expires=1771301869&x-signature=V01UYIzbY8joVVkIhlvK%2Bqad5ac%3D\",\"alt\":\"image.png\",\"title\":null}},{\"type\":\"blockquote\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ASK: ç”¨CSSå®ç°ä¸‰è§’å½¢\"}]}]},{\"type\":\"paragraph\"},{\"type\":\"image\",\"attrs\":{\"src\":\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4184bfd3ef24b0d884154ca36e6c471~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&x-expires=1771301869&x-signature=HbFI%2BJIPT0lJ6IwRbH6OKFm1vIk%3D\",\"alt\":\"image.png\",\"title\":null}},{\"type\":\"blockquote\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ASK: ç”¨Pythonå†™ä¸€ä¸ªå†’æ³¡æ’åº\"}]}]},{\"type\":\"paragraph\"},{\"type\":\"image\",\"attrs\":{\"src\":\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee8a472996b942bb88b529874d1130e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&x-expires=1771301869&x-signature=sBBsPLUr%2BE8hM8ILX1X7ddcWDfI%3D\",\"alt\":\"image.png\",\"title\":null}},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"åˆæ¬¡åŠ è½½ç”¨äº† 40 ç§’ï¼ˆä¸‹è½½æ¨¡å‹æƒé‡ï¼‰ï¼Œç„¶å...\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Token ç”Ÿæˆé€Ÿåº¦ï¼š15 tokens/sã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"ç”šè‡³æ¯” GPT-4 çš„ API å“åº”è¿˜è¦å¿«ï¼\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"å› ä¸ºè¿™æ˜¯\"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"æœ¬åœ°ç”Ÿæˆ\"},{\"type\":\"text\",\"text\":\"ï¼Œæ²¡æœ‰ç½‘ç»œå»¶è¿Ÿã€‚\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Network é¢æ¿ï¼š\"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"0 è¯·æ±‚ï¼Œçº¯æœ¬åœ°ã€‚\"}]}]}","title":"llm in browser åœ¨æµè§ˆå™¨é‡Œè·‘ Qwen2.5","tags":["ai"],"updateTime":1770712929392,"createTime":1770706790252,"draft":false,"intro":"æœ‰äº† WebGPUï¼ŒJavaScript å¯ä»¥ç›´æ¥è°ƒç”¨åº•å±‚çš„æ˜¾å¡ç®—åŠ›ã€‚","html":"<h1 level=\"1\" id=\"llm-in-browser-åœ¨æµè§ˆå™¨é‡Œè·‘-Qwen25\">llm in browser åœ¨æµè§ˆå™¨é‡Œè·‘ Qwen2.5</h1><h3 level=\"3\" id=\"è®©-Chrome-è·‘èµ·æ¥\">è®© Chrome è·‘èµ·æ¥</h3><p>æœ‰äº† WebGPUï¼ŒJavaScript å¯ä»¥ç›´æ¥è°ƒç”¨åº•å±‚çš„æ˜¾å¡ç®—åŠ›ã€‚</p><p>å†åŠ ä¸Š <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://link.juejin.cn?target=https%3A%2F%2Fwebllm.mlc.ai%2F\"><strong>WebLLM ğŸ¤–</strong></a> è¿™ç§å¤§æ€å™¨ï¼Œå®Œå…¨å¯ä»¥æŠŠ <strong>Llama-3-8B-Instruct</strong> è¿™ç§çº§åˆ«çš„æ¨¡å‹ï¼Œç»è¿‡ <strong>4bit é‡åŒ–</strong> åï¼Œå‹ç¼©åˆ° 3-4GBï¼Œç›´æ¥å¡è¿›æµè§ˆå™¨é‡Œ</p><p>æ²¡ç”¨åç«¯çš„ä¸€è¡Œä»£ç ã€‚</p><p>ç›´æ¥ <code>npm install @mlc-ai/web-llm</code>ã€‚</p><p>æ ¸å¿ƒé€»è¾‘å°±è¿™ä¹ˆå‡ è¡Œï¼ˆä¼ªä»£ç ï¼‰ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»è¯•ä¸€ä¸‹ï¼š</p><div class=\"llt-code readonly\"><div class=\"language\">JavaScript</div><div class=\"wrapper\"><pre><code class=\"language-JavaScript\"><span class=\"hljs-keyword\" class=\"hljs-keyword\">import</span> { <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">CreateMLCEngine</span> } <span class=\"hljs-keyword\" class=\"hljs-keyword\">from</span> <span class=\"hljs-string\" class=\"hljs-string\">&quot;@mlc-ai/web-llm&quot;</span>;\n\n<span class=\"hljs-comment\" class=\"hljs-comment\">// é€‰æœ€å°ä¸”ç¨³å®šçš„Qwen2.5,å…ˆä¿è¯èƒ½è·‘èµ·æ¥</span>\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> modelId = <span class=\"hljs-string\" class=\"hljs-string\">&quot;Qwen2.5-0.5B-Instruct-q4f32_1-MLC&quot;</span>;\n\n<span class=\"hljs-comment\" class=\"hljs-comment\">// åˆå§‹åŒ–å¼•æ“ï¼ˆWebGPUï¼‰</span>\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> engine = <span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> <span class=\"hljs-title,class_\" class=\"hljs-title,class_\">CreateMLCEngine</span>(modelId, {\n  <span class=\"hljs-attr\" class=\"hljs-attr\">initProgressCallback</span>: <span class=\"hljs-function\" class=\"hljs-function\">(<span class=\"hljs-params\" class=\"hljs-params\">p</span>) =&gt;</span> {\n    <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">console</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">log</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;[MLC]&quot;</span>, p.<span class=\"hljs-property\" class=\"hljs-property\">text</span>);\n  },\n});\n\n<span class=\"hljs-comment\" class=\"hljs-comment\">// æ§åˆ¶å°å¯¹è¯</span>\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\" class=\"hljs-keyword\">function</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">ask</span>(<span class=\"hljs-params\" class=\"hljs-params\">text: string</span>) {\n  <span class=\"hljs-keyword\" class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> engine.<span class=\"hljs-property\" class=\"hljs-property\">chat</span>.<span class=\"hljs-property\" class=\"hljs-property\">completions</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">create</span>({\n    <span class=\"hljs-attr\" class=\"hljs-attr\">messages</span>: [{ <span class=\"hljs-attr\" class=\"hljs-attr\">role</span>: <span class=\"hljs-string\" class=\"hljs-string\">&quot;user&quot;</span>, <span class=\"hljs-attr\" class=\"hljs-attr\">content</span>: text }],\n  });\n  <span class=\"hljs-variable,language_\" class=\"hljs-variable,language_\">console</span>.<span class=\"hljs-title,function_\" class=\"hljs-title,function_\">log</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;ğŸ¤–&quot;</span>, res.<span class=\"hljs-property\" class=\"hljs-property\">choices</span>[<span class=\"hljs-number\" class=\"hljs-number\">0</span>].<span class=\"hljs-property\" class=\"hljs-property\">message</span>.<span class=\"hljs-property\" class=\"hljs-property\">content</span>);\n}\n\n<span class=\"hljs-comment\" class=\"hljs-comment\">// æµ‹è¯•</span>\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">ask</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;å†™ä¸€ä¸ª React Button&quot;</span>)\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">ask</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;ç”¨CSSå®ç°ä¸‰è§’å½¢&quot;</span>)\n<span class=\"hljs-keyword\" class=\"hljs-keyword\">await</span> <span class=\"hljs-title,function_\" class=\"hljs-title,function_\">ask</span>(<span class=\"hljs-string\" class=\"hljs-string\">&quot;ç”¨Pythonå†™ä¸€ä¸ªå†’æ³¡æ’åº&quot;</span>)\n\n</code></pre></div></div><p>è¿è¡Œçš„é‚£ä¸€åˆ»ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨åŠ è½½ï¼ˆè®¾å¤‡é…ç½®ä½çš„åŒå­¦å°½é‡ç”¨å°æ¨¡å‹ğŸ™‚â€â†”ï¸ï¼‰ <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmlc-ai%2Fweb-llm%2Fblob%2Fmain%2Fsrc%2Fconfig.ts%23L313\">ğŸ‘‰ å¯ç”¨æ¨¡å‹</a></p><p></p><img src=\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea96ea970286482ebf6359b5e77ede8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771301869&amp;x-signature=9XHkhpQeC1HBWE%2FPbx%2BOpm8Ja9M%3D\" alt=\"image.png\"><blockquote><p>ASK: å†™ä¸€ä¸ª React Button</p></blockquote><p></p><img src=\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58aa00282dfb4558a8ebaf3b0fe9ba82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771301869&amp;x-signature=V01UYIzbY8joVVkIhlvK%2Bqad5ac%3D\" alt=\"image.png\"><blockquote><p>ASK: ç”¨CSSå®ç°ä¸‰è§’å½¢</p></blockquote><p></p><img src=\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4184bfd3ef24b0d884154ca36e6c471~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771301869&amp;x-signature=HbFI%2BJIPT0lJ6IwRbH6OKFm1vIk%3D\" alt=\"image.png\"><blockquote><p>ASK: ç”¨Pythonå†™ä¸€ä¸ªå†’æ³¡æ’åº</p></blockquote><p></p><img src=\"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee8a472996b942bb88b529874d1130e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771301869&amp;x-signature=sBBsPLUr%2BE8hM8ILX1X7ddcWDfI%3D\" alt=\"image.png\"><p>åˆæ¬¡åŠ è½½ç”¨äº† 40 ç§’ï¼ˆä¸‹è½½æ¨¡å‹æƒé‡ï¼‰ï¼Œç„¶å...</p><p><strong>Token ç”Ÿæˆé€Ÿåº¦ï¼š15 tokens/sã€‚</strong></p><p>ç”šè‡³æ¯” GPT-4 çš„ API å“åº”è¿˜è¦å¿«ï¼</p><p>å› ä¸ºè¿™æ˜¯<strong>æœ¬åœ°ç”Ÿæˆ</strong>ï¼Œæ²¡æœ‰ç½‘ç»œå»¶è¿Ÿã€‚</p><p>Network é¢æ¿ï¼š<strong>0 è¯·æ±‚ï¼Œçº¯æœ¬åœ°ã€‚</strong></p><script type=\"module\">const injectHtml = (root, html) => {\n  const iframe = document.createElement(\"iframe\");\n  const htmlContent = `<html><head></head><body>${html}</body></html>`;\n  iframe.style.width = \"100%\";\n  iframe.style.height = \"100%\";\n  iframe.onload = () => {\n    const doc = iframe.contentDocument || iframe.contentWindow?.document;\n    if (!doc) {\n      return;\n    }\n    doc.open();\n    doc.write(htmlContent);\n    doc.close();\n  };\n  root.replaceChildren(iframe);\n}\n  document.querySelectorAll('.playground')?.forEach(el=>{\n    const html = el.getAttribute('data-html');\n    if (html) {\n      injectHtml(el,html);\n    }\n    const indicator = document.createElement(\"div\");\n    indicator.className = \"indicator\";\n    const showCode = document.createElement(\"div\");\n    showCode.className = \"show-code\";\n    showCode.innerText = \"code\";\n    showCode.onclick = () => {\n      el.parentElement.classList.remove(\"preview-only\");\n    };\n    const showPreview = document.createElement(\"div\");\n    showPreview.className = \"show-preview\";\n    showPreview.innerText = \"preview\";\n    showPreview.onclick = () => {\n      el.parentElement.classList.add(\"preview-only\");\n    };\n    indicator.appendChild(showCode);\n    indicator.appendChild(showPreview);\n    el.parentElement.appendChild(indicator);\n    if (window.screen.width < 768) {\n      showPreview.click();\n    }\n  });</script>","cover":{"src":"https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea96ea970286482ebf6359b5e77ede8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&x-expires=1771301869&x-signature=9XHkhpQeC1HBWE%2FPbx%2BOpm8Ja9M%3D","alt":"image.png","title":null},"id":"llm-in-browser-åœ¨æµè§ˆå™¨é‡Œè·‘-Qwen25","path":"/posts/llm-in-browser-åœ¨æµè§ˆå™¨é‡Œè·‘-Qwen25.json"}