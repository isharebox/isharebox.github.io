<!DOCTYPE html> <html lang="zh-CN" class="dark"> <head><meta charset="UTF-8"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="isharebox"><meta name="msapplication-TileColor" content="#1e2030"><meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><meta name="description" content=""><link rel="icon" href="/favicon.ico"><title>nanobot 多 agent 团队协作 | isharebox</title><link rel="stylesheet" href="/_astro/_page_.Q94QMkaZ.css">
<style>._tabset_selm3_1 ._tab-panel_selm3_1{display:none}._tabset_selm3_1 ._tab-panels_selm3_4{display:flex}._tabset_selm3_1 input[data-tab-name=direct]{display:none}._tabset_selm3_1 input[data-tab-name=direct]:checked~._tab-panels_selm3_4 ._tab-panel_selm3_1[data-tab-name=direct]{display:block}._tabset_selm3_1 input[data-tab-name=direct]:checked~._tab-labels_selm3_13 label[data-tab-name=direct]{border-bottom:2px solid red}._tabset_selm3_1 input[data-tab-name=app]{display:none}._tabset_selm3_1 input[data-tab-name=app]:checked~._tab-panels_selm3_4 ._tab-panel_selm3_1[data-tab-name=app]{display:block}._tabset_selm3_1 input[data-tab-name=app]:checked~._tab-labels_selm3_13 label[data-tab-name=app]{border-bottom:2px solid red}
.outlines a[data-anchor-tag=H1]{margin-left:0}.outlines a[data-anchor-tag=H2]{margin-left:12px}.outlines a[data-anchor-tag=H3]{margin-left:24px}.outlines a[data-anchor-tag=H4]{margin-left:36px}.outlines a[data-anchor-tag=H5]{margin-left:48px}.outlines a[data-anchor-tag=H6]{margin-left:60px}
</style>
<link rel="stylesheet" href="/_astro/_page_.ypUYv9mY.css">
<link rel="stylesheet" href="/_astro/_id_.CdoHgwyN.css"><script type="module" src="/_astro/hoisted._hzYIUG3.js"></script></head> <body class="min-h-screen"> <header class="flex justify-between items-center px-4 py-3 border-b" style="border-color: #292e42;"> <a href="/" class="text-lg font-semibold tracking-tight hover:opacity-80 transition-opacity" style="color: #c8d3f5;"> isharebox </a> <div class="flex items-center gap-3">   <div id="auth"></div> </div> </header>  <main> <div class="content"> <div class="w-full flex gap-2 pb-2">   </div> <div class="ud-root read-only flex-1"><h1 level="1" id="nanobot-多-agent-团队协作">nanobot 多 agent 团队协作</h1><blockquote><p>多Agent协作, 一个5人数字团队：A管日常事务管理、B写文章和学术研究、C做导生管理、D财务管理、E管社交媒体运营。每个Agent都是专家，各司其职，7×24小时随叫随到。</p></blockquote><p></p><p>要基于 <code>nanobot</code> 搭建一个7×24小时在线的5人数字专家团队，你可以采用 <strong>“1个协调者 + 5个专家”</strong> 的架构。所有专家Agent都作为**子Agent（subagent）**，不直接面向用户；协调者Agent作为统一入口，根据用户请求智能分派任务给对应的专家，并整合结果返回给用户。</p><p>这种架构清晰易维护，且能充分利用 <code>nanobot</code> 的内置 <code>agent</code> 服务实现跨Agent调用。</p><p>---</p><p>### 📁 推荐配置目录结构</p><p>在服务器上创建一个目录，例如 <code>digital-team/</code>，其结构如下：</p><p>```</p><p>digital-team/</p><p>├── agents/</p><p>│ ├── <a target="_blank" rel="noopener noreferrer nofollow" href="http://coordinator.md">coordinator.md</a> # 团队协调者（入口）</p><p>│ ├── <a target="_blank" rel="noopener noreferrer nofollow" href="http://admin.md">admin.md</a> # A：日常事务管理</p><p>│ ├── <a target="_blank" rel="noopener noreferrer nofollow" href="http://writer.md">writer.md</a> # B：写文章与学术研究</p><p>│ ├── <a target="_blank" rel="noopener noreferrer nofollow" href="http://mentor.md">mentor.md</a> # C：导生管理</p><p>│ ├── <a target="_blank" rel="noopener noreferrer nofollow" href="http://finance.md">finance.md</a> # D：财务管理</p><p>│ └── <a target="_blank" rel="noopener noreferrer nofollow" href="http://social.md">social.md</a> # E：社交媒体运营</p><p>└── mcp-servers.yaml # 公共MCP服务（如数据库、API等）</p><p>```</p><p>---</p><p>### ⚙️ 配置详解</p><p>#### 1. 公共MCP服务<code>mcp-servers.yaml</code>）</p><p>定义所有Agent可能用到的外部工具，例如文件存储、数据库、API等。这里仅作示例，你可以根据实际需求添加。</p><p>```yaml</p><p># digital-team/mcp-servers.yaml</p><p># 文件存储服务（用于读写文章、财务报告等）</p><p>filesystem:</p><p>command: npx</p><p>args: [&quot;-y&quot;, &quot;@modelcontextprotocol/server-filesystem&quot;, &quot;/data&quot;]</p><p># 数据库查询服务（例如查询学生信息、财务记录）</p><p>database:</p><p>url: <a target="_blank" rel="noopener noreferrer nofollow" href="http://your-db-mcp-server:3000">http://your-db-mcp-server:3000</a></p><p>headers:</p><p>Authorization: Bearer ${DB_TOKEN}</p><p>```</p><p>#### 2. 定义五个专家子Agent</p><p>每个专家Agent都设置为 <code>mode: subagent</code>，这样它们不会出现在用户界面，只能被其他Agent通过 <code>agent</code> 服务调用。每个Agent拥有明确的角色指令，并可选择性挂载需要的MCP服务。</p><p><strong>A：日常事务管理</strong> <code>admin.md</code>)</p><p>```markdown</p><p>---</p><p>name: 日常事务专家</p><p>model: gpt-4.1</p><p>mode: subagent</p><p>mcpServers:</p><p>- filesystem # 可能需要读写日程文件</p><p>---</p><p>你是一个专业的日常事务管理专家。负责安排会议、提醒待办事项、处理行政流程等。回答要简洁高效，直接给出可操作的建议或结果。</p><p>```</p><p><strong>B：写文章与学术研究</strong> <code>writer.md</code>)</p><p>```markdown</p><p>---</p><p>name: 写作与研究专家</p><p>model: claude-3-7-sonnet-latest</p><p>mode: subagent</p><p>mcpServers:</p><p>- filesystem # 读写文章草稿</p><p>- database # 查询文献资料</p><p>---</p><p>你是一位资深学术写作与研究专家。擅长文献综述、论文结构设计、学术表达润色。当被要求写作或研究时，提供高质量、逻辑清晰的内容。</p><p>```</p><p><strong>C：导生管理</strong> <code>mentor.md</code>)</p><p>```markdown</p><p>---</p><p>name: 导生管理专家</p><p>model: gpt-4.1</p><p>mode: subagent</p><p>mcpServers:</p><p>- database # 查询学生信息、指导记录</p><p>---</p><p>你负责导生（学生/学员）的日常管理，包括答疑、进度跟踪、心理支持等。回答要耐心、细致，关注学生的个性化需求。</p><p>```</p><p><strong>D：财务管理</strong> <code>finance.md</code>)</p><p>```markdown</p><p>---</p><p>name: 财务专家</p><p>model: claude-3-7-sonnet-latest</p><p>mode: subagent</p><p>mcpServers:</p><p>- filesystem # 读写财务报表</p><p>- database # 查询账目数据</p><p>---</p><p>你是一名严谨的财务管理专家。负责预算编制、报销审核、财务分析等。所有回答应基于准确数据，必要时给出Excel公式或计算步骤。</p><p>```</p><p><strong>E：社交媒体运营</strong> <code>social.md</code>)</p><p>```markdown</p><p>---</p><p>name: 社交媒体专家</p><p>model: gpt-4.1</p><p>mode: subagent</p><p>mcpServers:</p><p>- filesystem # 存储发布内容草稿</p><p>---</p><p>你是社交媒体运营专家，擅长策划文案、分析平台趋势、与粉丝互动。提供创意且符合品牌调性的内容建议，并给出最佳发布时间建议。</p><p>```</p><p>#### 3. 定义协调者Agent（入口）</p><p>协调者 <code>coordinator.md</code> 是唯一面向用户的Agent，它需要引入内置的 <code>agent</code> 服务，以便能够调用其他五个专家子Agent。</p><p>```markdown</p><p>---</p><p>name: 团队协调员</p><p>model: claude-3-7-sonnet-latest</p><p>mode: chat</p><p>mcpServers:</p><p>- agent # 必须引入，才能调用其他Agent</p><p>---</p><p>你是一个5人数字专家团队的协调员。团队成员如下：</p><p>- 日常事务专家（admin）：处理日程、待办、行政事务。</p><p>- 写作与研究专家（writer）：撰写文章、学术研究。</p><p>- 导生管理专家（mentor）：学生/学员指导与管理。</p><p>- 财务专家（finance）：预算、报销、财务分析。</p><p>- 社交媒体专家（social）：内容策划、平台运营。</p><p>当用户提出请求时，分析其需求，并调用最合适的专家来完成任务。你可以一次性调用一个专家，也可以将复杂任务拆解后分发给多个专家协作完成。调用方式为使用 <code>agent</code> 服务提供的 <code>chat_with_adminchat_with_writer</code> 等工具。收集所有专家回复后，整理成一份连贯、完整的答案返回给用户。</p><p>```</p><p>---</p><p>### 🔄 协作流程示例</p><p>假设用户问：“我想在本周五下午开一个组会，讨论最近的预算问题，同时需要准备一份会议通知和财务简报。”</p><p>协调者收到请求后，可以这样处理：</p><p>1. 调用 <code>chat_with_admin</code> 专家，请它安排周五下午的会议，并草拟会议通知。</p><p>2. 同时调用 <code>chat_with_finance</code> 专家，请它准备近期的财务简报。</p><p>3. 等待两位专家返回结果后，将会议通知和财务简报整合成完整回复。</p><p>在 <code>nanobot</code> 中，协调者可以通过 <code>agent</code> 服务提供的工具直接调用子Agent。例如在提示词中指示它使用这些工具，模型会自动选择合适的工具。</p><p>---</p><p>### 🚀 启动团队</p><p>在服务器上运行以下命令即可启动整个团队：</p><p>```bash</p><p>nanobot run ./digital-team/</p><p>```</p><p><code>nanobot</code> 会加载目录中的所有配置，协调者将作为聊天入口对外提供服务（例如通过stdio、SSE或WebSocket）。你可以通过任何支持MCP的客户端（如Claude Desktop、Cline等）连接到这个服务，开始与整个数字团队对话。</p><p>---</p><p>### 💡 扩展建议</p><p>- <strong>权限与安全</strong>：每个专家Agent使用的MCP服务可能涉及敏感数据，建议通过环境变量注入API密钥（如 <code>${DB_TOKEN}</code>），不要明文写在配置中。</p><p>- <strong>状态持久化</strong>：如果希望Agent记住对话历史<code>nanobot</code> 默认支持会话管理；对于长期运行的任务，可考虑外接向量数据库作为记忆存储。</p><p>- <strong>7×24小时可用</strong>：将 <code>nanobot</code> 部署为系统服务（如systemd），并配置自动重启，即可确保团队随时在线。</p><p>通过上述配置，你便拥有了一支各司其职、随叫随到的数字专家团队。需要调整某个Agent的职责或模型时，只需修改对应的 <code>.md</code> 文件，重启服务即可生效。</p><p></p><h1 level="1" id="OpenClaw多Agent协作踩坑实录从翻车到跑通的全记录">OpenClaw多Agent协作踩坑实录：从翻车到跑通的全记录</h1><p> OpenClaw的多Agent团队协作功能，想搭建一个AI写作团队：运营主管阿强、研究员阿亮、写手阿文、审核员阿严，4个Bot协作写文章。</p><p>配置过程中踩了一堆坑，&quot;翻车-爬起-跑通&quot;的全过程分享, 避开这些坑。</p><hr><h2 level="2" id="一先说要做什么">一、先说要做什么</h2><p>简单来说，就是<strong>只跟阿强说话</strong>，让他自动协调其他三个Bot完成文章写作：</p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220194329904.png" alt=""><hr><h2 level="2" id="二踩坑实录">二、踩坑实录</h2><h3 level="3" id="坑1跨Agent通信权限没开最隐蔽的坑">坑1：跨Agent通信权限没开（最隐蔽的坑）</h3><p><strong>现象</strong>： 阿强收到任务后，只说&quot;好的，我立即协调团队&quot;，然后就没下文了。其他Bot一点反应都没有。</p><p>查日志发现报错：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">ini</div><div class="wrapper"><pre><code class="language-ini">需要设置 <span class="hljs-attr" class="hljs-attr">tools.sessions.visibility</span>=all 才能向其他团队成员发送消息
</code></pre></div></div><p><strong>原因</strong>： <code>openclaw.json</code> 里缺了一个关键配置。默认情况下，Agent只能看到自己的会话，看不到其他Bot的会话。</p><p><strong>解决方案</strong>： 在 <code>openclaw.json</code> 的 <code>tools</code> 部分添加：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-attr" class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;sessions&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
    <span class="hljs-attr" class="hljs-attr">&quot;visibility&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;all&quot;</span>
  <span class="hljs-punctuation" class="hljs-punctuation">}</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><p><strong>经验教训</strong>： 这个配置在官方文档里有，但很多教程没强调。没有它，多Agent协作根本玩不起来。</p><hr><h3 level="3" id="坑2文件路径错乱最折腾的坑">坑2：文件路径错乱（最折腾的坑）</h3><p><strong>现象</strong>： 阿亮说大纲已经保存了，阿文却说找不到文件。</p><p>查看日志发现搞笑的一幕：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">ruby</div><div class="wrapper"><pre><code class="language-ruby">阿亮保存到：~<span class="hljs-regexp" class="hljs-regexp">/.openclaw/workspace</span><span class="hljs-regexp" class="hljs-regexp">/openclaw-camp-article/outline</span>.md
阿文去读取：~<span class="hljs-regexp" class="hljs-regexp">/.openclaw/agents</span><span class="hljs-regexp" class="hljs-regexp">/writer/workspace</span><span class="hljs-regexp" class="hljs-regexp">/workspace/openclaw</span>-camp-article/outline.md
</code></pre></div></div><p>注意看，阿文的路径里多了个 <code>workspace/workspace</code>，变成嵌套路径了！</p><p><strong>原因</strong>： 每个Agent有自己的 <code>workspace</code> 目录，但我让阿亮保存文件时用了相对路径 <code>workspace/...</code>，不同Agent解析出来路径不一致。</p><p><strong>解决方案</strong>： 所有Agent共享的文件，必须用<strong>绝对路径</strong>：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">css</div><div class="wrapper"><pre><code class="language-css">~/<span class="hljs-selector-class" class="hljs-selector-class">.openclaw</span>/workspace/openclaw-camp-<span class="hljs-selector-tag" class="hljs-selector-tag">article</span>/<span class="hljs-attribute" class="hljs-attribute">outline</span><span class="hljs-selector-class" class="hljs-selector-class">.md</span>
</code></pre></div></div><p>而不是相对路径：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">css</div><div class="wrapper"><pre><code class="language-css">workspace/openclaw-camp-<span class="hljs-selector-tag" class="hljs-selector-tag">article</span>/<span class="hljs-attribute" class="hljs-attribute">outline</span><span class="hljs-selector-class" class="hljs-selector-class">.md</span>
</code></pre></div></div><p><strong>经验教训</strong>： <a target="_blank" rel="noopener noreferrer nofollow" href="http://SOUL.md">SOUL.md</a>里所有的文件路径都要用 <code>~/.openclaw/workspace/...</code> 开头，确保大家都能找到同一个文件。</p><hr><h3 level="3" id="坑3agentToAgentallow配错了最无语的坑">坑3：agentToAgent.allow配错了（最无语的坑）</h3><p><strong>现象</strong>： 想开启Agent间直接通信，配置了 <code>agentToAgent</code>，但一直不生效。</p><p><strong>错误配置</strong>：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-attr" class="hljs-attr">&quot;agentToAgent&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-literal" class="hljs-literal"><span class="hljs-keyword" class="hljs-keyword">true</span></span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;allow&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;sessions_list&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;sessions_send&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;sessions_history&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><p>看出来问题了吗？我把<strong>工具名</strong>填进去了！</p><p><strong>正确配置</strong>：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-attr" class="hljs-attr">&quot;agentToAgent&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-literal" class="hljs-literal"><span class="hljs-keyword" class="hljs-keyword">true</span></span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;allow&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;manager&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;researcher&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;writer&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;reviewer&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><p><code>allow</code> 里应该填的是<strong>Agent的ID</strong>，不是工具名！</p><p><strong>经验教训</strong>： 配置项的命名容易误导。<code>allow</code>指的是&quot;允许哪些Agent之间通信&quot;，不是&quot;允许使用哪些工具&quot;。</p><hr><h3 level="3" id="坑4全局toolsdeny误伤友军最坑的坑">坑4：全局tools.deny误伤友军（最坑的坑）</h3><p><strong>现象</strong>： 我在 <code>openclaw.json</code> 根目录配置了全局限制：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-attr" class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;deny&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;write&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;edit&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;exec&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;apply_patch&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><p>想着限制一下阿强的写入权限，结果<strong>所有Agent都不能写文件了</strong>！阿文连文章都保存不了。</p><p><strong>原因</strong>： <code>tools.deny</code> 放在根目录会影响所有Agent。想单独限制某个Agent，要在该Agent的配置里加：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;manager&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;阿强&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
    <span class="hljs-attr" class="hljs-attr">&quot;allow&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;sessions_list&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;sessions_send&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;sessions_history&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;read&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
    <span class="hljs-attr" class="hljs-attr">&quot;deny&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;write&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;edit&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;exec&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;apply_patch&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;bash&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span>
  <span class="hljs-punctuation" class="hljs-punctuation">}</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><p><strong>经验教训</strong>： 权限控制要精确到Agent级别，不要搞全局限制，否则连自己一起坑。</p><hr><h3 level="3" id="坑5以为能看到所有Bot的回复最天真的坑">坑5：以为能看到所有Bot的回复（最天真的坑）</h3><p><strong>现象</strong>： 我傻傻地以为配置了4个Bot，就能看到4个窗口同时聊天。结果只收到阿强的回复，其他Bot好像&quot;消失&quot;了。</p><p><strong>真相</strong>： 这是正常的！<code>sessions_send</code> 的工作方式就是<strong>后台通信</strong>。</p><p>阿强用 <code>sessions_send</code> 发消息给阿亮，阿亮在后台会话里处理，回复也是直接给阿强，不是给你。</p><p>你能看到的只有阿强的汇总结果，其他Bot的对话过程在后台&quot;一闪而过&quot;。</p><p><strong>解决方案</strong>： 如果想要&quot;过程清晰可见&quot;，需要用 <code>sessions_spawn</code>（子智能体）方式，这个在后续教程里会讲。</p><p><strong>经验教训</strong>： 不要以为是配置错了，这只是不同协调方式的特性差异。</p><hr><h2 level="2" id="三跑通后的效果">三、跑通后的效果</h2><p>搞定所有坑之后，效果是这样的：</p><p><strong>给阿强发消息</strong>：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">diff</div><div class="wrapper"><pre><code class="language-diff">你好，我需要写一篇介绍OpenClaw的文章
要求：
<span class="hljs-deletion" class="hljs-deletion">- 主题：OpenClaw是什么，为什么现在这么火</span>
<span class="hljs-deletion" class="hljs-deletion">- 目标读者：零基础小白</span>
<span class="hljs-deletion" class="hljs-deletion">- 字数：2000左右</span>
<span class="hljs-deletion" class="hljs-deletion">- 风格：通俗易懂</span>

请协调团队完成。
</code></pre></div></div><p><strong>阿强回复</strong>（约10分钟后）：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">css</div><div class="wrapper"><pre><code class="language-css">✅ 任务完成！

📊 执行摘要：
阶段<span class="hljs-number" class="hljs-number">1</span>：资料搜集（阿亮）- 已完成
阶段<span class="hljs-number" class="hljs-number">2</span>：撰写初稿（阿文）- 已完成
阶段<span class="hljs-number" class="hljs-number">3</span>：质量审核（阿严）- 已完成
阶段<span class="hljs-number" class="hljs-number">4</span>：修改定稿（阿文）- 已完成

📁 成果文件：
- 终稿：~/<span class="hljs-selector-class" class="hljs-selector-class">.openclaw</span>/workspace/openclaw-camp-<span class="hljs-selector-tag" class="hljs-selector-tag">article</span>/final<span class="hljs-selector-class" class="hljs-selector-class">.md</span>

<span class="hljs-selector-attr" class="hljs-selector-attr">[文章内容...]</span>
</code></pre></div></div><p>所有中间产物（大纲、初稿、审核报告）都保存在共享目录里，想看随时能看。</p><p>以下是过程实录：</p><h5 level="5" id="1给阿强下达任务需求">1、给阿强下达任务需求</h5><p></p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220171347165.png" alt=""><h5 level="5" id="2研究员-阿亮收到任务">2、研究员-阿亮收到任务</h5><p>阿亮收到任务开始干活，然后将交付物，转给写手-阿文。</p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220171608426.png" alt=""><h5 level="5" id="3写手-阿文收到任务">3、写手-阿文收到任务</h5><p>先是收到了阿强给的任务，先读取风格指南，等待阿亮的大纲。</p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220172250003.png" alt=""><p>等到阿亮的大纲，开始干活，完成后转交给审核员-阿严来审核</p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220172411698.png" alt=""><h5 level="5" id="4审核员-阿严收到写手-阿亮的文章">4、审核员-阿严收到写手-阿亮的文章</h5><p></p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220172745512.png" alt=""><h5 level="5" id="5写手-阿文收到阿言的审核意见开始优化">5、写手-阿文收到阿言的审核意见，开始优化</h5><p></p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220172955399.png" alt=""><h5 level="5" id="6运营主管-阿强收到所有成员的进展状态已完成">6、运营主管-阿强收到所有成员的进展状态已完成</h5><p></p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220173147868.png" alt=""><h5 level="5" id="7我收到阿强的汇报消息">7、我收到阿强的汇报消息</h5><p></p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220173307154.png" alt=""><h5 level="5" id="8协作过程中产生的会话记录">8、协作过程中产生的会话记录</h5><p>每个bot都由sessions记录产生，证明协作过程中间他们是有通话记录的，感兴趣的可以点击进去看一下会话记录。</p><p></p><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260220175011571.png" alt=""><p>以上只是一个团队协作的雏形，后续改造成子 Agent 协作，过程会更直观，灵活性会更高！</p><h2 level="2" id="四核心配置清单">四、核心配置清单</h2><p>如果你也想搭一个，这里是<strong>经过验证的完整配置</strong>：</p><h3 level="3" id="1-openclawjson-关键部分">1. openclaw.json 关键部分</h3><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">json</div><div class="wrapper"><pre><code class="language-json"><span class="hljs-punctuation" class="hljs-punctuation">{</span>
  <span class="hljs-attr" class="hljs-attr">&quot;agents&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
    <span class="hljs-attr" class="hljs-attr">&quot;list&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span>
      <span class="hljs-punctuation" class="hljs-punctuation">{</span>
        <span class="hljs-attr" class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;manager&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;阿强&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/manager/workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;agentDir&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/manager/agent&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
          <span class="hljs-attr" class="hljs-attr">&quot;allow&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;sessions_list&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;sessions_send&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;sessions_history&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;read&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
          <span class="hljs-attr" class="hljs-attr">&quot;deny&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span><span class="hljs-string" class="hljs-string">&quot;write&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;edit&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;exec&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;apply_patch&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-string" class="hljs-string">&quot;bash&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">]</span>
        <span class="hljs-punctuation" class="hljs-punctuation">}</span>
      <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-punctuation" class="hljs-punctuation">{</span>
        <span class="hljs-attr" class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;researcher&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;阿亮&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/researcher/workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;agentDir&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/researcher/agent&quot;</span>
      <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-punctuation" class="hljs-punctuation">{</span>
        <span class="hljs-attr" class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;writer&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;阿文&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/writer/workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;agentDir&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/writer/agent&quot;</span>
      <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-punctuation" class="hljs-punctuation">{</span>
        <span class="hljs-attr" class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;reviewer&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;阿严&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/reviewer/workspace&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
        <span class="hljs-attr" class="hljs-attr">&quot;agentDir&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;~/.openclaw/agents/reviewer/agent&quot;</span>
      <span class="hljs-punctuation" class="hljs-punctuation">}</span>
    <span class="hljs-punctuation" class="hljs-punctuation">]</span>
  <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;bindings&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">[</span>
    <span class="hljs-punctuation" class="hljs-punctuation">{</span>
      <span class="hljs-attr" class="hljs-attr">&quot;agentId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;manager&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-attr" class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span> <span class="hljs-attr" class="hljs-attr">&quot;channel&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;telegram&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-attr" class="hljs-attr">&quot;accountId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;manager&quot;</span> <span class="hljs-punctuation" class="hljs-punctuation">}</span>
    <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
    <span class="hljs-punctuation" class="hljs-punctuation">{</span>
      <span class="hljs-attr" class="hljs-attr">&quot;agentId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;researcher&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-attr" class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span> <span class="hljs-attr" class="hljs-attr">&quot;channel&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;telegram&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-attr" class="hljs-attr">&quot;accountId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;researcher&quot;</span> <span class="hljs-punctuation" class="hljs-punctuation">}</span>
    <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
    <span class="hljs-punctuation" class="hljs-punctuation">{</span>
      <span class="hljs-attr" class="hljs-attr">&quot;agentId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;writer&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-attr" class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span> <span class="hljs-attr" class="hljs-attr">&quot;channel&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;telegram&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-attr" class="hljs-attr">&quot;accountId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;writer&quot;</span> <span class="hljs-punctuation" class="hljs-punctuation">}</span>
    <span class="hljs-punctuation" class="hljs-punctuation">}</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
    <span class="hljs-punctuation" class="hljs-punctuation">{</span>
      <span class="hljs-attr" class="hljs-attr">&quot;agentId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;reviewer&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
      <span class="hljs-attr" class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span> <span class="hljs-attr" class="hljs-attr">&quot;channel&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;telegram&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">,</span> <span class="hljs-attr" class="hljs-attr">&quot;accountId&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;reviewer&quot;</span> <span class="hljs-punctuation" class="hljs-punctuation">}</span>
    <span class="hljs-punctuation" class="hljs-punctuation">}</span>
  <span class="hljs-punctuation" class="hljs-punctuation">]</span><span class="hljs-punctuation" class="hljs-punctuation">,</span>
  <span class="hljs-attr" class="hljs-attr">&quot;tools&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
    <span class="hljs-attr" class="hljs-attr">&quot;sessions&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-punctuation" class="hljs-punctuation">{</span>
      <span class="hljs-attr" class="hljs-attr">&quot;visibility&quot;</span><span class="hljs-punctuation" class="hljs-punctuation">:</span> <span class="hljs-string" class="hljs-string">&quot;all&quot;</span>
    <span class="hljs-punctuation" class="hljs-punctuation">}</span>
  <span class="hljs-punctuation" class="hljs-punctuation">}</span>
<span class="hljs-punctuation" class="hljs-punctuation">}</span>
</code></pre></div></div><h3 level="3" id="2-SOULmd-文件路径规范">2. <a target="_blank" rel="noopener noreferrer nofollow" href="http://SOUL.md">SOUL.md</a> 文件路径规范</h3><p>所有文件路径都用<strong>绝对路径</strong>：</p><div class="llt-code readonly"><div class="language">auto</div><div class="wrapper"><pre><code></code></pre></div></div><div class="llt-code readonly"><div class="language">markdown</div><div class="wrapper"><pre><code class="language-markdown"><span class="hljs-bullet" class="hljs-bullet">-</span> 大纲：~/.openclaw/workspace/openclaw-camp-article/outline.md
<span class="hljs-bullet" class="hljs-bullet">-</span> 初稿：~/.openclaw/workspace/openclaw-camp-article/draft-v1.md
<span class="hljs-bullet" class="hljs-bullet">-</span> 审核报告：~/.openclaw/workspace/openclaw-camp-article/review-v1.md
<span class="hljs-bullet" class="hljs-bullet">-</span> 终稿：~/.openclaw/workspace/openclaw-camp-article/final.md
</code></pre></div></div><h3 level="3" id=""></h3><img src="https://wamplempic.oss-cn-beijing.aliyuncs.com/md/20260219223904633.png" alt=""><h2 level="2" id="五小结">五、小结</h2><p>这趟踩坑之旅让我明白了几件事：</p><ol><li><p><strong>文档要看全</strong>：<code>tools.sessions.visibility</code> 这种关键配置，很多教程一笔带过</p></li><li><p><strong>路径要用绝对</strong>：相对路径在多Agent场景下就是定时炸弹</p></li><li><p><strong>配置要精确</strong>：Agent级别的配置别放全局，否则影响所有Bot</p></li><li><p><strong>预期要对齐</strong>：<code>sessions_send</code> 就是&quot;后台协作&quot;模式，看不到过程是正常的</p></li></ol><p>现在AI写作团队已经能正常工作了。从给阿强下达任务到拿到终稿，全程约10分钟，比一个人折腾要快得多。</p><p></p><script type="module">const injectHtml = (root, html) => {
  const iframe = document.createElement("iframe");
  const htmlContent = `<html><head></head><body>${html}</body></html>`;
  iframe.style.width = "100%";
  iframe.style.height = "100%";
  iframe.onload = () => {
    const doc = iframe.contentDocument || iframe.contentWindow?.document;
    if (!doc) {
      return;
    }
    doc.open();
    doc.write(htmlContent);
    doc.close();
  };
  root.replaceChildren(iframe);
}
  document.querySelectorAll('.playground')?.forEach(el=>{
    const html = el.getAttribute('data-html');
    if (html) {
      injectHtml(el,html);
    }
    const indicator = document.createElement("div");
    indicator.className = "indicator";
    const showCode = document.createElement("div");
    showCode.className = "show-code";
    showCode.innerText = "code";
    showCode.onclick = () => {
      el.parentElement.classList.remove("preview-only");
    };
    const showPreview = document.createElement("div");
    showPreview.className = "show-preview";
    showPreview.innerText = "preview";
    showPreview.onclick = () => {
      el.parentElement.classList.add("preview-only");
    };
    indicator.appendChild(showCode);
    indicator.appendChild(showPreview);
    el.parentElement.appendChild(indicator);
    if (window.screen.width < 768) {
      showPreview.click();
    }
  });</script></div> <div data-page-id="nanobot-多-agent-团队协作" class="navigator flex justify-between items-center mt-4 py-4"> <a href="/post/从一个人到一个团队" class="flex items-center gap-1 text-blue cursor-pointer flex-[45%]"> <div class="i-ri:arrow-left-double-line w-5 h-5 flex-shrink-0"></div> <div class="text-start">从一个人，到一个团队</div> </a> <a href="/post/the-distance-between-a-question-and-a-first-answer-just-got-very-small" class="flex items-center justify-end gap-1 text-blue cursor-pointer flex-[45%]"> <div class="text-end">The distance between a question and a first answer just got very small</div> <div class="i-ri:arrow-right-double-line w-5 h-5 flex-shrink-0"></div> </a> </div> </div> <div class="outline-wrapper"></div> </main>  <footer class="site-footer" data-astro-cid-sz7xmlte> <!-- 导航链接 --> <nav class="footer-nav" data-astro-cid-sz7xmlte>  <a href="/" class="footer-link" data-astro-cid-sz7xmlte> Home </a> <span class="nav-dot" data-astro-cid-sz7xmlte>·</span> <a href="/tag/projects" class="footer-link" data-astro-cid-sz7xmlte> Projects </a> <span class="nav-dot" data-astro-cid-sz7xmlte>·</span> <a href="/tools" class="footer-link" data-astro-cid-sz7xmlte> Notes </a> <span class="nav-dot" data-astro-cid-sz7xmlte>·</span> <a href="https://web.chatboxai.app/" class="footer-link" target="_blank" rel="noopener noreferrer" data-astro-cid-sz7xmlte> Chatbox </a> <span class="nav-dot" data-astro-cid-sz7xmlte>·</span> <a href="/about" class="footer-link" data-astro-cid-sz7xmlte> About </a>  </nav> <!-- 分割线 --> <div class="footer-divider" data-astro-cid-sz7xmlte></div> <!-- 版权信息 --> <div class="footer-copyright" data-astro-cid-sz7xmlte> <a href="https://isharebox.github.io" data-astro-cid-sz7xmlte>©  isharebox  ·  since 2026    ·</a> <a href="/rss.xml" class="rss-link" target="_blank" rel="noopener noreferrer" title="RSS Feed" data-astro-cid-sz7xmlte> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 256 256" aria-label="RSS Feed" data-astro-cid-sz7xmlte> <rect width="256" height="256" rx="28" fill="#ff6b35" data-astro-cid-sz7xmlte></rect> <circle cx="68" cy="189" r="24" fill="#fff" data-astro-cid-sz7xmlte></circle> <path d="M160 213h-34a82 82 0 0 0-82-82v-34a116 116 0 0 1 116 116z" fill="#fff" data-astro-cid-sz7xmlte></path> <path d="M184 213A140 140 0 0 0 44 73V38a175 175 0 0 1 175 175z" fill="#fff" data-astro-cid-sz7xmlte></path> </svg> </a> </div> </footer>  <!-- ★ 添加回到顶部按钮组件 --> <button id="back-to-top" class="back-to-top" aria-label="Back to top" data-astro-cid-wlspcwf4> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-wlspcwf4> <path d="M18 15l-6-6-6 6" data-astro-cid-wlspcwf4></path> </svg> </button>   </body></html>